# Path models (SEM 1)

<!-- https://stats.oarc.ucla.edu/r/seminars/rsem/ -->

Up to now, we have considered models with a single dependent variable, allowing the value of this to depend on multiple predictors or independent variables. Whilst flexible, this can be restrictive. When we considered mediation and the causal steps approach, we needed to estimate a number of separate models, with inference being based on a comparison of estimated parameters between these models.

## Graphical models

A graphical model in statistics refers to a ... The nodes represent variables and the edges the relations between these.

The graphical models used in structural equation modelling are often slighty more detailed. There are types of nodes to distinguish between observed variables, latent (unobserved) variables, constants (e.g. intercepts), and residuals. 

## Exogenous and endogenous variables

**Exogeneous variables** are variables that are not "accounted" for by other variables in the model. In terms of a graphical model, these variables have no parents (i.e. incoming arrows from other variables). **Endogeneous variables** are accounted for by other variables in the model; they do have parents (e.g. incoming arrows from other variables in the model).

## Multiple regression model

Multiple regression is perhaps the simplest example of a path model. It has multiple exonegenous variables $X_j$, and a single endogenous variable $Y$.

```{r}
library(sdamr)
library(lavaan)
data("trump2016")
dat <- subset(trump2016,state != "District of Columbia")

regmod <-   '
  # regressions
    percent_Trump_votes ~ 1 + hate_groups_per_million + percent_bachelors_degree_or_higher
'
fregmod <- lavaan::sem(regmod, data=trump2016)
summary(fmod1)
```

## A mediation model

```{r}

data("legacy2015")

mod1 <-   '
  # regressions
    intention ~ 1 + legacy
    donation ~ 1 + intention
'
fmod1 <- lavaan::sem(mod1, data=legacy2015)
summary(fmod1)

mod2 <-   '
  # regressions
    intention ~ 1 + legacy
    donation ~ 1 + intention + legacy
'
fmod2 <- lavaan::sem(mod2, data=legacy2015)
summary(fmod2)

```

## Multivariate Normal distribution

## A tiny bit of matrix algebra

## Errors-in-variable models
